<html>
    <head>
        <title>Covid Tracker - INDIA</title>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">

        <link href="https://cdn.bokeh.org/bokeh/release/bokeh-1.0.2.min.css" rel="stylesheet" type="text/css">
        <script src="https://cdn.bokeh.org/bokeh/release/bokeh-1.0.2.min.js"></script>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/4.4.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">
        <script src="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>

        <!--highcharts-->
        <script src="https://code.highcharts.com/highcharts.js"></script>
        <script src="https://code.highcharts.com/modules/series-label.js"></script>
        <script src="https://code.highcharts.com/modules/exporting.js"></script>
        <script src="https://code.highcharts.com/modules/export-data.js"></script>
        <script src="https://code.highcharts.com/modules/accessibility.js"></script>

    </head>

    <body>
        <!--
        <div class="jumbotron jumbotron-fluid bg-dark text-white">
            <div class="container">
              <h1 class="display-4">COVID-19 Tracker</h1>
              <p class="lead">Created by Viking & Khabbis</p>
            </div>
        </div>
        -->
        <!-- Image and text -->
        <nav class="navbar navbar-dark bg-dark">
          <a class="navbar-brand" href="#">
            <h3>COVID-19 Analysis</h3><p style="font-size: 15px; ">- by Komal  Gupta  &  Hina  Kanaujiya</p>
          </a>
        </nav>
        <br>
        <div class = "container">
          <ul class="nav nav-tabs">
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('covid') }}">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="{{ url_for('india') }}">India</a>
            </li>

            <li class="nav-item">
              <a class="nav-link " href="{{ url_for('contribute') }}">Contribute</a>
            </li>
          </ul>
        </div>

        <br>
        <div class="container text-center">
          <div class="card">
              <div class="card-body">
                  <h1>INDIA ANALYSIS</h1>
              </div>
          </div>
      </div>
      <br>
        <div class="container text-center">
            <div class="alert alert-danger alert-dismissible fade show">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Stay Safe !</strong> Total new cases are {{data['todayCases']}}
            </div>
        </div>
        <br>

        <!--Cards for india-->
        <div class="container text-center">
          <div class="row">
              <div class="col-sm-3">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">Confirmed Cases</h5>
                    <svg class="bi bi-person-check-fill" width="3em" height="3em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 100-6 3 3 0 000 6zm9.854-2.854a.5.5 0 010 .708l-3 3a.5.5 0 01-.708 0l-1.5-1.5a.5.5 0 01.708-.708L12.5 7.793l2.646-2.647a.5.5 0 01.708 0z" clip-rule="evenodd"/>
                    </svg>
                    <p class="card-text"></p>
                    <button type="button" class="btn btn-info btn-lg" style=" border-radius: 0px; border: 1px solid #FFFFFF;"><strong>{{data['cases']}}   </strong><span class="badge badge-light">+{{data['todayCases']}}</span></button>
                  </div>
                </div>
              </div>
              <div class="col-sm-3">
                  <div class="card">
                    <div class="card-body">
                      <h5 class="card-title">Active Cases</h5>
                      <svg class="bi bi-heart-half" width="3em" height="3em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                          <path fill-rule="evenodd" d="M8 1.314C3.562-3.248-7.534 4.735 8 15V1.314z" clip-rule="evenodd"/>
                          <path fill-rule="evenodd" d="M8 2.748l-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 01.176-.17C12.72-3.042 23.333 4.867 8 15z" clip-rule="evenodd"/>
                      </svg>
                      <p class="card-text"></p>
                      <button type="button" class="btn btn-warning btn-lg" style="min-width:150px; min-height:50px; border-radius: 0px; border: 1px solid #FFFFFF;"><strong>{{data['active']}}</strong></button>
                    </div>
                  </div>
              </div>
              <div class="col-sm-3">
                  <div class="card">
                    <div class="card-body">
                      <h5 class="card-title">Recovered Cases</h5>
                      <svg class="bi bi-heart-fill" width="3em" height="3em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                          <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z" clip-rule="evenodd"/>
                      </svg>
                      <p class="card-text"></p>
                      <button type="button" class="btn btn-success btn-lg" style="min-width:150px; min-height:50px; border-radius: 0px; border: 1px solid #FFFFFF;"><strong>{{data['recovered']}}</strong></button>
                    </div>
                  </div>
              </div>
              <div class="col-sm-3">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">Confirmed Deaths</h5>
                    <svg class="bi bi-person-dash-fill" width="3em" height="3em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 100-6 3 3 0 000 6zm5-.5a.5.5 0 01.5-.5h4a.5.5 0 010 1h-4a.5.5 0 01-.5-.5z" clip-rule="evenodd"/>
                    </svg>
                    <p class="card-text"> </p>
                    <button type="button" class="btn btn-danger btn-lg" style="min-width:150px; min-height:50px; border-radius: 0px; border: 1px solid #FFFFFF;"><strong>{{data['deaths']}}   </strong><span class="badge badge-light">  +{{data['todayDeaths']}}</span></button>
                  </div>
                </div>
              </div>
            </div>
      </div>
      <br>

       <!--
        <div class="container text-center">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">No. of Days v/s Confirmed cases</h5>
                    <div class="ct-chart ct-perfect-fourth">
                        <script>
                            var chart = new Chartist.Line('.ct-chart', {
                              labels: {{day}},
                              series: [
                                {{confirmed}},
                                {{deaths}},
                              ]
                            }, {
                              low: 0
                            });

                            // Let's put a sequence number aside so we can use it in the event callbacks
                            var seq = 0,
                              delays = 30,
                              durations = 500;

                            // Once the chart is fully created we reset the sequence
                            chart.on('created', function() {
                              seq = 0;
                            });

                            // On each drawn element by Chartist we use the Chartist.Svg API to trigger SMIL animations
                            chart.on('draw', function(data) {
                              seq++;

                              if(data.type === 'line') {
                                // If the drawn element is a line we do a simple opacity fade in. This could also be achieved using CSS3 animations.
                                data.element.animate({
                                  opacity: {
                                    // The delay when we like to start the animation
                                    begin: seq * delays + 1000,
                                    // Duration of the animation
                                    dur: durations,
                                    // The value where the animation should start
                                    from: 0,
                                    // The value where it should end
                                    to: 1
                                  }
                                });
                              } else if(data.type === 'label' && data.axis === 'x') {
                                data.element.animate({
                                  y: {
                                    begin: seq * delays,
                                    dur: durations,
                                    from: data.y + 100,
                                    to: data.y,
                                    // We can specify an easing function from Chartist.Svg.Easing
                                    easing: 'easeOutQuart'
                                  }
                                });
                              } else if(data.type === 'label' && data.axis === 'y') {
                                data.element.animate({
                                  x: {
                                    begin: seq * delays,
                                    dur: durations,
                                    from: data.x - 100,
                                    to: data.x,
                                    easing: 'easeOutQuart'
                                  }
                                });
                              } else if(data.type === 'point') {
                                data.element.animate({
                                  x1: {
                                    begin: seq * delays,
                                    dur: durations,
                                    from: data.x - 10,
                                    to: data.x,
                                    easing: 'easeOutQuart'
                                  },
                                  x2: {
                                    begin: seq * delays,
                                    dur: durations,
                                    from: data.x - 10,
                                    to: data.x,
                                    easing: 'easeOutQuart'
                                  },
                                  opacity: {
                                    begin: seq * delays,
                                    dur: durations,
                                    from: 0,
                                    to: 1,
                                    easing: 'easeOutQuart'
                                  }
                                });
                              } else if(data.type === 'grid') {
                                // Using data.axis we get x or y which we can use to construct our animation definition objects
                                var pos1Animation = {
                                  begin: seq * delays,
                                  dur: durations,
                                  from: data[data.axis.units.pos + '1'] - 30,
                                  to: data[data.axis.units.pos + '1'],
                                  easing: 'easeOutQuart'
                                };

                                var pos2Animation = {
                                  begin: seq * delays,
                                  dur: durations,
                                  from: data[data.axis.units.pos + '2'] - 100,
                                  to: data[data.axis.units.pos + '2'],
                                  easing: 'easeOutQuart'
                                };

                                var animations = {};
                                animations[data.axis.units.pos + '1'] = pos1Animation;
                                animations[data.axis.units.pos + '2'] = pos2Animation;
                                animations['opacity'] = {
                                  begin: seq * delays,
                                  dur: durations,
                                  from: 0,
                                  to: 1,
                                  easing: 'easeOutQuart'
                                };

                                data.element.animate(animations);
                              }
                            });
                        </script>
                    </div>
                </div>
            </div>

        </div>
        <br>
        -->
        <!--
        <div class="container text-center">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">No. of Days v/s Deaths</h5>
                    <div class="ct-chart ct-perfect-fourth">
                        <script>
                            function myChart2(a,b){
                                var data = {
                                    // A labels array that can contain any sort of values
                                    labels: a,
                                    // Our series array that contains series objects or in this case series data arrays
                                    series: [
                                        b
                                    ]
                                };

                                var options = {
                                    // Don't draw the line chart points
                                    showPoint: false,
                                    // Disable line smoothing
                                    lineSmooth: false,
                                    // X-Axis specific configuration

                                    onlyInteger: true,
                                    axisX: {
                                        // We can disable the grid for this axis
                                        showGrid: false,
                                        // and also don't show the label
                                        showLabel: true,
                                    },
                                    // Y-Axis specific configuration
                                    axisY: {
                                        // Lets offset the chart a bit from the labels
                                        offset: 50,
                                        // The label interpolation function enables you to modify the values
                                        // used for the labels on each axis. Here we are converting the
                                        // values into million pound.
                                        labelInterpolationFnc: function(value) {
                                        return  value;
                                        }
                                    }
                                };

                            // Create a new line chart object where as first parameter we pass in a selector
                            // that is resolving to our chart container element. The Second parameter
                            // is the actual data object.
                            var myChart20 =  new Chartist.Line('.ct-chart', data,options);
                            }
                            myChart2({{day}}, {{deaths}})

                        </script>
                    </div>
                </div>
            </div>

        </div>
-->
      <div class="container">
        <div class="row">
          <div class="col sm-6 col-md-6">
            <div id="chart1"></div>
          </div>
          <div class="col sm-6 col-md-6">
            <div id="chart2"></div>
          </div>
          <div class="col sm-6 col-md-6">
            <div id="chart3"></div>
          </div>
          <div class="col sm-6 col-md-6">
            <div id="chart4"></div>
          </div>
        </div>
      </div>
      <br>

      <div class="container">
        <div class="row">
          <div class="col sm-12 col-md-12">
            <div id="chart5"></div>
          </div>
        </div>
      </div>
      <br>

      <div class="container">
        <div class="row">
          <div class="col sm-6 col-md-6">
            <div id="chart6"></div>
          </div>
          <div class="col sm-6 col-md-6">
            <div id="chart7"></div>
          </div>
          <div class="col sm-6 col-md-6">
            <div id="chart8"></div>
          </div>
          <div class="col sm-6 col-md-6">
            <div id="chart9"></div>
          </div>
        </div>
      </div>
      <br>

      <div class="container">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>State</th>
              <th>Confirmed Cases</th>
              <th>Active Cases</th>
              <th>Recovered Cases</th>
              <th>Deaths</th>
            </tr>
          </thead>
          <tbody>
                {% for i in range(32) %}
                    <tr>
                        <td>{{states[0][i]}}</td>
                        <td>{{states[1][i]}}</td>
                        <td>{{states[2][i]}}</td>
                        <td>{{states[3][i]}}</td>
                        <td>{{states[4][i]}}</td>
                    </tr>
                {% endfor %}
          </tbody>
        </table>
    </div>
    <br>
    <br>


      <script type="text/javascript">
        Highcharts.chart('chart1', {

          title: {
              text: 'Daywise confirmed cases and deaths'
          },

          subtitle: {
              text: 'Data plotted is for every 5th day'
          },

          yAxis: {
              title: {
                  text: 'Number of People'
              }
          },

          xAxis: {
              accessibility: {
                  rangeDescription: 'Range:'
              },
              title: {
                  text: 'Number of Days'
              },
              categories: {{day[::5]+[day[-1]]}}
          },

          legend: {
              layout: 'vertical',
              align: 'right',
              verticalAlign: 'middle'
          },

          plotOptions: {
              series: {
                  label: {
                      connectorAllowed: false
                  },
                  pointStart: 1
              }
          },

          series: [{
              name: 'Confirmed',
              data: {{confirmed[::5]+[confirmed[-1]]}}
          }, {
              name: 'Deaths',
              data: {{deaths[::5]+[deaths[-1]]}}
          }],

          responsive: {
              rules: [{
                  condition: {
                      maxWidth: 500
                  },
                  chartOptions: {
                      legend: {
                          layout: 'horizontal',
                          align: 'center',
                          verticalAlign: 'bottom'
                      }
                  }
              }]
          }

          });

          Highcharts.chart('chart2', {

            title: {
                text: 'Confirmed Cases in last 10 days'
            },

            subtitle: {
                text: 'Data plotted is for each day'
            },

            yAxis: {
                title: {
                    text: 'Number of People'
                }
            },

            xAxis: {
                accessibility: {
                    rangeDescription: 'Range:'
                },
                title: {
                    text: 'Number of Days'
                },
                categories: {{day[-10:]}}
            },

            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle'
            },

            plotOptions: {
                series: {
                    label: {
                        connectorAllowed: false
                    },
                    pointStart: 1
                }
            },

            series: [{
                name: 'Confirmed',
                data: {{confirmed[-10:]}}
            }],

            responsive: {
                rules: [{
                    condition: {
                        maxWidth: 500
                    },
                    chartOptions: {
                        legend: {
                            layout: 'horizontal',
                            align: 'center',
                            verticalAlign: 'bottom'
                        }
                    }
                }]
            }

            });

            Highcharts.chart('chart3', {

              title: {
                  text: 'Confirmed Deaths in last 10 days'
              },

              subtitle: {
                  text: 'Data plotted is for each day'
              },

              yAxis: {
                  title: {
                      text: 'Number of People'
                  }
              },

              xAxis: {
                  accessibility: {
                      rangeDescription: 'Range:'
                  },
                  title: {
                      text: 'Number of Days'
                  },
                  categories: {{day[-10:]}}
              },

              legend: {
                  layout: 'vertical',
                  align: 'right',
                  verticalAlign: 'middle'
              },

              plotOptions: {
                  series: {
                      label: {
                          connectorAllowed: false
                      },
                      pointStart: 1
                  }
              },

              series: [{
                  name: 'Deaths',
                  data: {{deaths[-10:]}}
              }],

              responsive: {
                  rules: [{
                      condition: {
                          maxWidth: 500
                      },
                      chartOptions: {
                          legend: {
                              layout: 'horizontal',
                              align: 'center',
                              verticalAlign: 'bottom'
                          }
                      }
                  }]
              }

              });

              Highcharts.chart('chart4', {
                chart: {
                    type: 'bar'
                },
                title: {
                    text: 'Stacked Data for top 5 states'
                },
                subtitle: {
                  text: 'Comparing Confirmed, Active and Recovered cases'
                },
                xAxis: {
                    categories: ['{{states[0][0]}}', '{{states[0][1]}}', '{{states[0][2]}}', '{{states[0][3]}}', '{{states[0][4]}}']
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'People affected'
                    }
                },
                legend: {
                    reversed: true
                },
                plotOptions: {
                    series: {
                        stacking: 'normal'
                    }
                },
                series: [{
                    name: 'Confirmed',
                    data: [{{states[1][0]}}, {{states[1][1]}}, {{states[1][2]}}, {{states[1][3]}}, {{states[1][4]}}]
                }, {
                    name: 'Active',
                    data: [{{states[2][0]}}, {{states[2][1]}}, {{states[2][2]}}, {{states[2][3]}}, {{states[2][4]}}]
                }, {
                    name: 'Recovered',
                    data: [{{states[3][0]}}, {{states[3][1]}}, {{states[3][2]}}, {{states[3][3]}}, {{states[3][4]}}]
                }]
            });


            Highcharts.chart('chart6', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Top 10 states with Maximum Confirmed Cases'
                },
                subtitle: {
                    text: 'Graph includes all types of cases summary'
                },
                xAxis: {

                    categories: [
                        '{{states[0][0]}}',
                        '{{states[0][1]}}',
                        '{{states[0][2]}}',
                        '{{states[0][3]}}',
                        '{{states[0][4]}}',
                        '{{states[0][5]}}',
                        '{{states[0][6]}}',
                        '{{states[0][7]}}',
                        '{{states[0][8]}}',
                        '{{states[0][9]}}'
                    ],
                    crosshair: true
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Number of people'
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.0f} </b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: 'Confirmed Cases',
                    data: {{states[1][:10]}}
                }]
            });

            Highcharts.chart('chart7', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Top 10 states with Least Confirmed Cases'
                },
                subtitle: {
                    text: ''
                },
                xAxis: {

                    categories: [
                        '{{states[0][-1]}}',
                        '{{states[0][-2]}}',
                        '{{states[0][-3]}}',
                        '{{states[0][-4]}}',
                        '{{states[0][-5]}}',
                        '{{states[0][-6]}}',
                        '{{states[0][-7]}}',
                        '{{states[0][-8]}}',
                        '{{states[0][-9]}}',
                        '{{states[0][-10]}}'
                    ],
                    crosshair: true
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Number of people'
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.0f} </b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: 'Confirmed Cases',
                    data: {{states[1][-10:][::-1]}}
                }]
            });

            Highcharts.chart('chart5', {
              chart: {
                  plotBackgroundColor: null,
                  plotBorderWidth: null,
                  plotShadow: false,
                  type: 'pie'
              },
              title: {
                  text: 'Share percentage of types of cases'
              },
              tooltip: {
                  pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
              },
              accessibility: {
                  point: {
                      valueSuffix: '%'
                  }
              },
              plotOptions: {
                  pie: {
                      allowPointSelect: true,
                      cursor: 'pointer',
                      dataLabels: {
                          enabled: true,
                          format: '<b>{point.name}</b>: {point.percentage:.1f} %'
                      }
                  }
              },
              series: [{
                  name: 'Cases',
                  colorByPoint: true,
                  data: [{
                      name: 'Confirmed',
                      y: ({{data['cases']}}/({{data['cases']}}+{{data['deaths']}}+{{data['recovered']}}+{{data['active']}}))*100,

                  }, {
                      name: 'Active',
                      y: ({{data['active']}}/({{data['cases']}}+{{data['deaths']}}+{{data['recovered']}}+{{data['active']}}))*100

                  }, {
                      name: 'Recovered',
                      y: ({{data['recovered']}}/({{data['cases']}}+{{data['deaths']}}+{{data['recovered']}}+{{data['active']}}))*100
                  }, {
                      name: 'Deaths',
                      y: ({{data['deaths']}}/({{data['cases']}}+{{data['deaths']}}+{{data['recovered']}}+{{data['active']}}))*100

                  }]
              }]
          });

      </script>
      <footer class="page-footer font-small bg-dark">
      <div class="footer-copyright text-center py-3">
        <p style="color: azure;">© Komal & Hina </p>
      </div>

    </body>
</html>
